\documentclass{article}
\author{Abraham Levkoy}
\title{SICP exercises, section 1.2}

\usepackage{mystyle}

\begin{document}
\maketitle

\section{Exercise 1.29}
\begin{quote}
    Simpson's Rule is a more accurate method of numerical integration than the
    method illustrated above. Using Simpson's Rule, the integral of a function
    $f$ between $a$ and $b$ is approximated as
    \begin{equation*}
        \frac{h}{3}(y_0+4y_1+2y_2+4y_3+2y_4+\cdots+2y_{n-2}+4y_{n-1}+y_n),
    \end{equation*}
    where $h=(b−a)/n$, for some even integer $n$, and $y_k=f(a+kh)$.
    (Increasing $n$ increases the accuracy of the approximation.) Define a
    procedure that takes as arguments $f$, $a$, $b$, and $n$ and returns the
    value of the integral, computed using Simpson’s Rule. Use your procedure to
    integrate \texttt{cube} between 0 and 1 (with $n=100$ and $n=1000$), and
    compare the results to those of the \texttt{integral} procedure shown
    above.
\end{quote}

\lstinputlisting[firstline=4,lastline=26]{ch1/ex1.29.scm}

\begin{lstlisting}
> (integral cube 0 1 .01)
.24998750000000042
> (simpson cube 0 1 100)
.25
> (integral cube 0 1 .001)
.2467166666666667
> (simpson cube 0 1 1000)
.25
\end{lstlisting}

\texttt{simpson} finds the exact value of the integral ($\frac{1}{4}$) and is
thus more accurate than \texttt{integral}. In fact, it is spookily accurate. It
seems to produce results using only 2 intervals that are as accurate as
\texttt{integral} with 100 intervals.

\section{Exercise 1.30}
\begin{quote}
    The \texttt{sum} procedure above generates a linear recursion. The
    procedure can be rewritten so that the sum is performed iteratively. Show
    how to do this by filling in the missing expressions in the following
    definition:
    \begin{lstlisting}
(define (sum term a next b)
  (define (iter a result)
    (if <??>
        <??>
        (iter <??> <??>)))
  (iter <??> <??>))
    \end{lstlisting}
\end{quote}

\lstinputlisting[firstline=5,lastline=12]{ch1/ex1.30.scm}

This implementation produces the same results as the recursive implementation
when used in \texttt{simpson}.

\section{Exercise 1.31}
\begin{quote}
    \begin{enumerate}
        \item The \texttt{sum} procedure is only the simplest of a vast number
            of similar abstractions that can be captured as higher-order
            procedures. Write an analogous procedure called \texttt{product}
            that returns the product of the values of a function at points over
            a given range. Show how to define \texttt{factorial} in terms of
            \texttt{product}. Also use \texttt{product} to compute
            approximations to $\pi$ using the formula
            \begin{equation*}
                \frac{\pi}{4}=
                \frac{2\cdot4\cdot4\cdot6\cdot6\cdot8\cdot\cdots}
                     {3\cdot3\cdot5\cdot5\cdot7\cdot7\cdot\cdots}.
            \end{equation*}
        \item If your product procedure generates a recursive process, write
            one that generates an iterative process. If it generates an
            iterative process, write one that generates a recursive process.
    \end{enumerate}
\end{quote}

\subsection{Recursive process}
\lstinputlisting[firstline=3,lastline=10]{ch1/ex1.31.scm}

\lstinputlisting[firstline=12,lastline=23]{ch1/ex1.31.scm}

\lstinputlisting[firstline=30,lastline=41]{ch1/ex1.31.scm}
This procedure counts terms in a way such that there are two terms of this
procedure for every one term of the canonical formulation of the Wallis Formula.
I suppose my procedure is half as precise as one using the canonical enumeration
of terms. No matter: I also do half as much work per term, so I can just use
twice as many terms.

\subsection{Iterative process}
\lstinputlisting[firstline=50,lastline=60]{ch1/ex1.31.scm}

\end{document}
