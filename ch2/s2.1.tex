\documentclass{article}
\author{Abraham Levkoy}
\title{SICP exercises, section 2.1}

\usepackage{mystyle}

\begin{document}
\maketitle

\section{Exercise 2.1}
\begin{quote}
    Define a better version of \texttt{make-rat} that handles both positive and
    negative arguments. \texttt{Make-rat} should normalize the sign so that if
    the rational number is positive, both the numerator and denominator are
    positive, and if the rational number is negative, only the numerator is
    negative.
\end{quote}

\lstinputlisting[firstline=22,lastline=35]{ch2/ex2.1.scm}

\section{Exercise 2.2}
\begin{quote}
    Consider the problem of representing line segments in a plane. Each segment
    is represented as a pair of points: a starting point and an ending point.
    Define a constructor \texttt{make-segment} and selectors
    \texttt{start-segment} and \texttt{end-segment} that define the
    representation of segments in terms of points.  Furthermore, a point can be
    represented as a pair of numbers: the $x$ coordinate and the $y$
    coordinate. Accordingly, specify a constructor \texttt{make-point} and
    selectors \texttt{x-point} and \texttt{y-point} that define this
    representation. Finally, using your selectors and constructors, define a
    procedure \texttt{midpoint-segment} that takes a line segment as argument
    and returns its midpoint (the point whose coordinates are the average of
    the coordinates of the endpoints). To try your procedures, youâ€™ll need a
    way to print points:
    \begin{lstlisting}
(define (print-point p)
  (newline)
  (display "(")
  (display (x-point p))
  (display ",")
  (display (y-point p))
  (display ")"))
    \end{lstlisting}
\end{quote}

\lstinputlisting[firstline=27,lastline=53]{ch2/ex2.2.scm}

\section{Exercise 2.3}
\begin{quote}
    Implement a representation for rectangles in a plane. (Hint: You may want
    to make use of Exercise 2.2.) In terms of your constructors and selectors,
    create procedures that compute the perimeter and the area of a given
    rectangle. Now implement a different representation for rectangles. Can you
    design your system with suitable abstraction barriers, so that the same
    perimeter and area procedures will work using either representation?
\end{quote}

The first implementation represents a rectangle as 3 points. The fourth point
could be derived if it were needed. The \texttt{area} and \texttt{perimeter}
functions are implemented in terms of helpers \texttt{height-rectangle} and
\texttt{width-rectangle}, which are in turn implemented in terms of the point
selectors for this implementation.
% Still working in ex2.2.scm to avoid copying solution of exercise 2.2
\lstinputlisting[firstline=64,lastline=100]{ch2/ex2.2.scm}

The second implementation represents a rectangle as 2 segments, which are
assumed to share a point. This requires new selectors and new implementations of
\texttt{width-rectangle} and \texttt{height-rectangle}, but \texttt{area} and
\texttt{perimeter} don't need to change.
\lstinputlisting[firstline=120,lastline=133]{ch2/ex2.2.scm}

\section{Exercise 2.4}
\begin{quote}
    Here is an alternative procedural representation of pairs. For this
    representation, verify that \texttt{(car (cons x y))} yields \texttt{x} for
    any objects \texttt{x} and \texttt{y}.
    \begin{lstlisting}
(define (cons x y)
  (lambda (m) (m x y)))

(define (car z)
  (z (lambda (p q) p)))
    \end{lstlisting}
    What is the corresponding definition of \texttt{cdr}? (Hint: To verify that
    this works, make use of the substitution model of 1.1.5.)
\end{quote}

\begin{lstlisting}
(car (cons x y))
(car (lambda (m) (m x y)))
((lambda (m) (m x y)) (lambda (p q) p))
((lambda (p q) p) x y)
x
\end{lstlisting}
\texttt{car} produces the expected result. The corresponding definition of
\texttt{cdr} is
\lstinputlisting[firstline=10,lastline=11]{ch2/ex2.4.scm}

\section{Exercise 2.5}
\begin{quote}
    Show that we can represent pairs of nonnegative integers using only numbers
    and arithmetic operations if we represent the pair $a$ and $b$ as the
    integer that is the product $2^a3^b$. Give the corresponding definitions of
    the procedures \texttt{cons}, \texttt{car}, and \texttt{cdr}.
\end{quote}

2 and 3 are coprime, so $a$ and $b$ can be found by finding the umber of times
that 2 and 3, respectively, divide evenly into the whole number.
\lstinputlisting[firstline=3,lastline=16]{ch2/ex2.5.scm}

\section{Exercise 2.6}
\begin{quote}
    In case representing pairs as procedures wasn't mind-boggling enough,
    consider that, in a language that can manipulate procedures, we can get by
    without numbers (at least insofar as nonnegative integers are concerned) by
    implementing 0 and the operation of adding 1 as
    \begin{lstlisting}
(define zero (lambda (f) (lambda (x) x)))

(define (add-1 n)
  (lambda (f) (lambda (x) (f ((n f) x)))))
    \end{lstlisting}
    This representation is known as Church numerals, after its inventor, Alonzo
    Church, the logician who invented the $\lambda$-calculus.

    Define \texttt{one} and \texttt{two} directly (not in terms of
    \texttt{zero} and \texttt{add-1}). (Hint: Use substitution to evaluate
    \texttt{(add-1 zero)}). Give a direct definition of the addition procedure
    \texttt{+} (not in terms of repeated application of \texttt{add-1}).
\end{quote}

A Church numeral represents a number as a procedure that applies f to its input
as many times as the number.
\begin{lstlisting}
(add-1 zero)
(lambda (f) (lambda (x) (f ((zero f) x))))
(lambda (f) (lambda (x) (f (((lambda (f) (lambda (x) x)) f) x))))
(lambda (f) (lambda (x) (f (((lambda (f) f)) x))))
(lambda (f) (lambda (x) (f x)))
\end{lstlisting}
\texttt{one} is the procedure of \texttt{f} that returns a procedure of
\texttt{x} that applies \texttt{f} to \texttt{x} once. Similarly, \texttt{two}
is a procedure that applies \texttt{f} twice.
\lstinputlisting[firstline=15,lastline=16]{ch2/ex2.6.scm}

Addition is defined below. I did not redefine \texttt{+} to avoid breaking any
built-in procedures or making life generally uncomfortable for myself.
\lstinputlisting[firstline=19,lastline=26]{ch2/ex2.6.scm}

\end{document}
